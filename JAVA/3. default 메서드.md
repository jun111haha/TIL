# 자바 8 default 메서드의 등장
보통 인터페이스는 규칙을 잡거나, 서비스의 플로우 로직을 잡는 데 사용하곤 한다.

하지만 인터페이스를 구현하는 클래스에서는 메서드를 모두 구현해야하기 때문에 인터페이스에 메서드를 추가할때 문제가 발생한다. 메서드 하나를 추가하려면 해당 인터페이스를 구현하는 모든 클래스에서는 해당 메서드를 모두 구현해줘야 하는 것이다.

Java8에서는 이러한 문제를 해결하기 위해 2가지 방법을 제공한다.

인터페이스 내부에 정적 메서드(static method)를 사용한다.
인터페이스의 기본 구현을 제공할 수 있도록 디폴트 메서드(default method) 기능을 사용한다.
인터페이스에 디폴트 메서드를 사용하여 메서드를 구현할 수 있다.

디폴트 메서드를 이용하면 인터페이스의 기분 구현을 그대로 상속하므로 인터페이스에 자유롭게 새로운 메서드를 추가할 수 있게 된다. 이로인해 호환성을 유지하면서 API를 바꿀 수 있다.

## 추상 클래스와 인터페이스는 뭐가 다를까?

"디폴트 메서드를 사용한다면 결국 인터페이스가 아니라 추상 클래스가 아닌가?" 하는 개발자들이 있을 것이다.

1. 클래스는 하나의 추상 클래스만 상속받을 수 있지만 인터페이스는 여러 개를 구현할 수 있다.
2. 추상 클래스는 인스턴스 변수로 공통 상태를 가질 수 있다. 하지만 인터페이스는 인스턴스 변수를 가질 수 없다.
3. 디폴트 메서드를 이용하면 인터페이스의 기본 구현을 그대로 상속하므로 인터페이스에 자유롭게 새로운 메서드를 추가할 수 있게된다. 

## 디폴트 메서드의 정의
디폴트 메서드의 등장으로 인터페이스는 자신을 구현하는 클래스에서 매소드를 구현할 필요가 없게 되었다. 디폴트 메서드를 누가 구현할까? 
인터페이스를 구현하는 클래스에서 구현하지 않은 메서드는 인터페이스 자체에서 기본으로 제공한다. 이름이 디폴트 메서드인 이유이다.
디폴트 메서드는 default 키워드로 시작하며 다른 클래스에 선언된 메서드처럼 메서드 바디를 포함한다.

```java
public interface Sized {
  int size();
  default boolean isEmpty() {}
    return size() == 0;
  }
}
```

## 디폴트 메서드의 활용, 동작 다중 상속
디폴트 메서드를 사용하면 기존에는 불가능했던 동작 다중 상속 기능도 구현할 수 있다.
클래스는 다중 상속을 이용해서 기존 코드를 재사용할 수 있다. 자바에서 클래스는 1개의 다른 클래스만 상속할 수 있지만 인터페이스는 여러 개를 구현할 수 있다.
하나의 클래스에서 1개의 파일을 상속하고 여러개의 인터페이스를 구현할수 있는데, 이는 디폴트 메서드를 사용하지 않아도 다중 상속을 활용할 수 있다는 사실을 뜻한다. 
하지만 이제 자바8부터는 인터페이스가 구현을 포함할 수 있으므로 클래스는 여러 인터페이스에서 동작을 상속받을 수 있게 되었다. 중복되지않는 최소한의 인터페이스를 유지한다면 우리 코드에서 동작을 쉽게 재사용하고 조합할 수 있다.

## 충돌 해결
인터페이스 A가있고, 인터페이스 B가 있다. 인터페이스 A, B는 둘이서 아무런 연관이 없고 클래스 C는 인터페이스 A와 B를 구현하고있다. 만약 인터페이스 A, B가 같은 hello() 라는 디폴트 메서드를 가지고 있을때, 클래스 C에서 hello() 메서드를 호출한다면 A, B 중에 어떤 메서드를 실행해야할까?

직접 메서드를 명시해줘야한다.
```java
public class C implements B, A {
  void hello() {
    B.super.hello();
  }
}
```

